<h1>Novo Pedido</h1>
<div class="well">
  <form #formPedido="ngForm">
    <div class="row">
      <div class="form-group">
        <label>Digite seu CPF:</label>
        <input [(ngModel)]="cpfPesquisado" (ngModelChange)="pesquisarCPF()" [ngModelOptions]="{standalone: true}">
        <div>
          <span *ngFor="let cliente of clientes" (click)="clienteSelecionado(cliente)"
            class="cliente">{{cliente.nome}}</span>
        </div>
        <div *ngIf="pedido.cliente">
          <div class="row">
            <div class="form-group col-md-6">
              <label for="descricao">Selecione os produtos</label>
              <select class="form-control" name="produto" [(ngModel)]="itemSelecionado.item">
                <option selected="selected" disabled>Produtos</option>
                <option *ngFor="let produto of produtos" [ngValue]="produto">{{ produto.descricao }}</option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label for="quantidade">Quantidade</label>
              <input type="quantidade" [(ngModel)]="itemSelecionado.quantidade" name="quantidade" #quantidade="ngModel">
              <div *ngIf="quantidade.errors && (quantidade.dirty || quantidade.touched)" class="alert alert-danger">
                <div [hidden]="!quantidade.errors.required">Digite uma quantidade</div>

              </div>
            </div>
          </div>
          <button type="button" class="btn btn-primary" (click)="addProduto()">
            Add Produto
          </button>
        </div>
        <div *ngIf="itensPedidos.length > 0">
          <div class="row">
            <table class="table table-striped table-bordered table-hover">
              <tbody>
                <tr>
                  <th>Descricao</th>
                  <th>Quantidade</th>
                </tr>
                <tr *ngFor="let item of itensPedidos">
                  <td>{{ item.item }}</td>
                  <td>{{ item.quantidade }}</td>
                </tr>
                <tr>
                  <th colspan="4">Total de itens: {{totalItens}}</th>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <!-- <label for="descricao">Quantidade:</label>
            <input [(ngModel)]="produto.quantidade" #descricao="ngModel" type="text" class="form-control" id="descricao" name="descricao"
                minlength="3" required />
            <div *ngIf="quantidade.errors && (quantidade.dirty || quantidade.touched)" class="alert alert-danger">
                <div [hidden]="!quantidade.errors.required">Digite o descrição do produto.</div>
                <div [hidden]="!quantidade.errors.minlength">
                    O produto deve conter ao menos 3 caracteres.
                </div>
            </div> -->
      </div><br>
      <div class="row">
        <div class='col-xs-12 col-md-6 right'>
          <a [routerLink]="['/pedidos']" class="btn btn-secondary">
            <i class="fa fa-arrow-left" aria-hidden="true"></i> Voltar
          </a>
        </div>
        <div class='col-xs-12 col-md-6 left'>
          <button type="button" class="btn btn-primary" (click)="inserir()" [disabled]="!formPedido.form.valid">
            <i class="fa fa-save" aria-hidden="true"></i> Salvar
          </button>
        </div>
      </div>
    </div>
  </form>
</div>
